# ============================================================================
# Helm Values - Production Environment
# ============================================================================
# This file contains configuration values for the production environment.
# These values override the default values in the Helm chart templates.
# This file is used when deploying to the 'main' branch via Argo CD.
# ============================================================================

# ----------------------------
# Service Account Configuration
# ----------------------------
serviceAccount:
  create: true
  name: n8n-prod-sa

# ----------------------------
# Application Settings
# ----------------------------
# Production uses multiple replicas for high availability
replicas: 2
timezone: Australia/Sydney

# ----------------------------
# Container Image Configuration
# ----------------------------
# Defines which Docker image to use and how to pull it.
# GitHub Actions CI/CD workflow automatically updates repository and tag
# when building and pushing images to Docker Hub.
image:
  # Custom image built by GitHub Actions CI/CD pipeline
  # Automatically updated by workflow when image is built and pushed
  repository: nomad1111/n8n-custom
  # Image tag - matches branch name (develop, uat, main)
  # GitHub Actions builds and tags images based on branch
  tag: main
  # Image pull policy: Always, IfNotPresent, or Never
  # Always: Always pull latest (recommended for CI/CD to get latest builds)
  pullPolicy: Always
  
  # Optional: Image pull secrets for Docker Hub authentication
  # Recommended to avoid Docker Hub rate limits
  # pullSecrets: ["dockerhub-secret"]
  
  # Optional: Override container entrypoint if needed
  # command: ["/docker-entrypoint.sh"]
  # args: ["start"]

# ----------------------------
# Ingress Configuration
# ----------------------------
ingress:
  enabled: true
  className: nginx
  # PRODUCTION: Replace with your actual domain name
  # Example: n8n.yourcompany.com
  host: n8n.yourdomain.com    # <--- UPDATE THIS with your real domain
  # Production should use HTTPS for security
  protocol: https  # http or https (use https for production)
  # TODO: Configure TLS certificates (Let's Encrypt, cert-manager, etc.)
  tls: []

# ----------------------------
# Service Configuration
# ----------------------------
service:
  type: ClusterIP
  port: 5678
  targetPort: 5678

# ----------------------------
# Persistent Storage Configuration
# ----------------------------
persistence:
  enabled: true
  storageClass: null
  accessMode: ReadWriteOnce
  # Production uses larger storage for more workflows and data
  size: 5Gi
  mountPath: /home/node/.n8n
